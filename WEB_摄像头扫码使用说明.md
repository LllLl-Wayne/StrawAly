# 📷 Web版摄像头扫码功能使用说明

## 🌟 功能特点

### ✨ 核心功能
- **实时摄像头扫描**：使用浏览器摄像头实时扫描二维码
- **自动识别**：检测到二维码后自动填入搜索框并查询
- **多摄像头支持**：自动检测并支持切换多个摄像头设备
- **移动端友好**：响应式设计，支持手机和平板设备
- **手动输入兼容**：扫描和手动输入两种方式并存

### 🔧 技术实现
- **纯前端实现**：使用HTML5 WebRTC API调用摄像头
- **jsQR库**：高效的二维码识别算法
- **实时扫描**：200ms间隔的高频扫描确保快速响应
- **优雅降级**：不支持摄像头的设备可使用手动输入

## 🚀 使用方法

### 1. 访问扫码页面
1. 打开草莓溯源系统Web界面
2. 点击导航栏的 **"📷 扫码追溯"** 选项卡

### 2. 启动摄像头扫描
1. 在 **"📹 摄像头扫描"** 区域点击 **"🎥 启动摄像头"** 按钮
2. 浏览器会请求摄像头权限，点击 **"允许"**
3. 摄像头启动后会显示实时画面和扫描框

### 3. 扫描二维码
1. 将草莓的二维码标签对准扫描框
2. 保持二维码清晰可见，距离摄像头10-30cm
3. 系统检测到二维码后会：
   - 显示绿色成功提示
   - 自动填入二维码内容到搜索框
   - 1秒后自动执行搜索
   - 显示草莓的详细信息

### 4. 多摄像头切换
- 如果设备有多个摄像头（如前置、后置），会显示 **"🔄 切换摄像头"** 按钮
- 点击可在不同摄像头间切换
- 建议使用后置摄像头获得更好的扫描效果

### 5. 停止摄像头
- 点击 **"⏹️ 停止摄像头"** 关闭摄像头
- 切换到其他页面时摄像头会自动关闭

## 💡 使用技巧

### 🎯 最佳扫描效果
- **光线充足**：确保有足够的光线照射二维码
- **保持稳定**：手持设备时保持稳定，避免抖动
- **合适距离**：二维码距离摄像头10-30cm效果最佳
- **角度适当**：二维码与摄像头保持垂直，避免倾斜

### 📱 移动设备优化
- **横屏使用**：建议在手机上横屏使用获得更大扫描区域
- **后置摄像头**：优先使用后置摄像头，对焦更好
- **稳定支撑**：可将手机放在桌面或使用三脚架支撑

### 🔧 故障排除
- **权限被拒绝**：检查浏览器设置，允许网站访问摄像头
- **摄像头被占用**：关闭其他使用摄像头的应用程序
- **识别失败**：尝试调整距离和角度，或使用手动输入

## 🌐 浏览器兼容性

### ✅ 完全支持
- **Chrome** 53+
- **Firefox** 36+
- **Safari** 11+
- **Edge** 12+

### ⚠️ 部分支持
- **IE**：不支持摄像头功能，可使用手动输入
- **旧版浏览器**：建议升级到最新版本

### 📱 移动端支持
- **iOS Safari** 14.3+
- **Android Chrome** 53+
- **微信浏览器**：部分版本支持
- **其他移动浏览器**：大部分现代浏览器都支持

## 🔒 隐私与安全

### 🛡️ 数据保护
- **本地处理**：二维码识别在浏览器本地完成，不上传图像数据
- **临时访问**：摄像头数据仅在扫描期间使用，不存储
- **权限控制**：用户完全控制摄像头访问权限

### 🔐 安全措施
- **HTTPS推荐**：生产环境建议使用HTTPS确保安全
- **权限提示**：每次访问都会明确请求用户授权
- **自动清理**：切换页面时自动关闭摄像头释放资源

## 📋 常见问题

### Q: 为什么摄像头无法启动？
A: 可能的原因：
1. 浏览器不支持WebRTC
2. 摄像头权限被拒绝
3. 摄像头被其他应用占用
4. 网站不是HTTPS（某些浏览器要求）

### Q: 二维码扫描不出来怎么办？
A: 尝试以下方法：
1. 确保二维码清晰完整
2. 调整光线和距离
3. 清洁摄像头镜头
4. 使用手动输入功能

### Q: 可以扫描其他格式的码吗？
A: 目前只支持二维码（QR Code），不支持条形码或其他格式。

### Q: 手机上扫描效果不好？
A: 建议：
1. 使用后置摄像头
2. 横屏操作
3. 保持手机稳定
4. 确保光线充足

## 🔄 更新记录

### v1.0.0 (2024-03-XX)
- ✨ 新增摄像头实时扫描功能
- ✨ 支持多摄像头设备切换
- ✨ 实现响应式设计适配移动端
- ✨ 集成jsQR高效识别算法
- ✨ 添加扫描成功视觉反馈

---

**💡 提示**：如果在使用过程中遇到问题，可以随时切换到手动输入模式继续使用系统功能。